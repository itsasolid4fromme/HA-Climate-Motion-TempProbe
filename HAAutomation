alias: HVAC - Outdoor Temp + Motion (Comfort/Eco with Resume) - Camper - Active
description: HVAC - Outdoor Temp + Motion (Comfort/Eco with Resume) - Camper - Active
triggers:
  - id: heat_temp
    entity_id:
      - sensor.thermo_hygrometer_20be08_h5074_tempc
    below: 63
    trigger: numeric_state
  - id: cool_temp
    entity_id: sensor.thermo_hygrometer_20be08_h5074_tempc
    above: 71
    trigger: numeric_state
  - id: no_motion_10m
    entity_id: binary_sensor.camper_eye_camper_motion
    to: "off"
    for: "00:10:00"
    trigger: state
  - id: motion_on
    entity_id: binary_sensor.camper_eye_camper_motion
    to: "on"
    trigger: state
actions:
  - choose:
      - conditions:
          - condition: trigger
            id: heat_temp
        sequence:
          - target:
              entity_id: climate.air_conditioner_fae455_air_conditioner
            data:
              hvac_mode: heat
            action: climate.set_hvac_mode
          - target:
              entity_id: climate.air_conditioner_fae455_air_conditioner
            data:
              temperature: 67
            action: climate.set_temperature
      - conditions:
          - condition: trigger
            id: cool_temp
        sequence:
          - target:
              entity_id: climate.air_conditioner_fae455_air_conditioner
            data:
              hvac_mode: cool
            action: climate.set_hvac_mode
          - target:
              entity_id: climate.air_conditioner_fae455_air_conditioner
            data:
              temperature: 74
            action: climate.set_temperature
      - conditions:
          - condition: trigger
            id: no_motion_10m
        sequence:
          - if:
              - condition: state
                entity_id: climate.air_conditioner_fae455_air_conditioner
                state: heat
            then:
              - target:
                  entity_id: climate.air_conditioner_fae455_air_conditioner
                data:
                  temperature: 63
                action: climate.set_temperature
            else:
              - if:
                  - condition: state
                    entity_id: climate.air_conditioner_fae455_air_conditioner
                    state: cool
                then:
                  - target:
                      entity_id: climate.air_conditioner_fae455_air_conditioner
                    data:
                      temperature: 77
                    action: climate.set_temperature
                else:
                  - stop: HVAC not in heat/cool; no eco change.
                    enabled: false
      - conditions:
          - condition: trigger
            id: motion_on
        sequence:
          - if:
              - condition: numeric_state
                entity_id: sensor.thermo_hygrometer_20be08_h5074_tempc
                below: 63
            then:
              - target:
                  entity_id: climate.air_conditioner_fae455_air_conditioner
                data:
                  hvac_mode: heat
                action: climate.set_hvac_mode
              - target:
                  entity_id: climate.air_conditioner_fae455_air_conditioner
                data:
                  temperature: 67
                action: climate.set_temperature
            else:
              - if:
                  - condition: numeric_state
                    entity_id: sensor.thermo_hygrometer_20be08_h5074_tempc
                    above: 71
                then:
                  - target:
                      entity_id: climate.air_conditioner_fae455_air_conditioner
                    data:
                      hvac_mode: cool
                    action: climate.set_hvac_mode
                  - target:
                      entity_id: climate.air_conditioner_fae455_air_conditioner
                    data:
                      temperature: 76
                    action: climate.set_temperature
                else:
                  - stop: Outdoor between 60–71°F; no occupied-setpoint change.
                    enabled: false
mode: single
max_exceeded: silent
